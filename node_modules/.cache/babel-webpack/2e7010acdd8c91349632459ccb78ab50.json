{"ast":null,"code":"import _asyncToGenerator from \"/home/cristian/Documentos/repositorios/bitbucket/puntocomercios/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { MessageService } from 'primeng/api';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { ConfirmationService } from 'primeng/api';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"primeng/api\";\nimport * as i2 from \"../../services/firestore/firestore.service\";\nimport * as i3 from \"../../firebase-storage.service\";\nimport * as i4 from \"primeng/toolbar\";\nimport * as i5 from \"primeng/table\";\nimport * as i6 from \"primeng/dialog\";\nimport * as i7 from \"primeng/toast\";\nimport * as i8 from \"primeng/confirmdialog\";\nimport * as i9 from \"primeng/button\";\nimport * as i10 from \"primeng/ripple\";\nimport * as i11 from \"primeng/inputtext\";\nimport * as i12 from \"@angular/common\";\nimport * as i13 from \"@angular/forms\";\nimport * as i14 from \"primeng/dropdown\";\nimport * as i15 from \"primeng/multiselect\";\nimport * as i16 from \"primeng/inputtextarea\";\nimport * as i17 from \"primeng/fileupload\";\nimport * as i18 from \"primeng/progressspinner\";\n\nfunction ProductsComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_ng_template_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.openNew();\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProductsComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelementStart(1, \"h5\", 16);\n    i0.ɵɵtext(2, \"Administrar Productos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 17);\n    i0.ɵɵelement(4, \"input\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProductsComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"th\", 19);\n    i0.ɵɵelement(2, \"p-tableHeaderCheckbox\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\", 20);\n    i0.ɵɵtext(4, \"Nombre \");\n    i0.ɵɵelement(5, \"p-sortIcon\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Foto\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 22);\n    i0.ɵɵtext(9, \"Precio \");\n    i0.ɵɵelement(10, \"p-sortIcon\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 24);\n    i0.ɵɵtext(12, \"Categoria \");\n    i0.ɵɵelement(13, \"p-sortIcon\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\", 26);\n    i0.ɵɵtext(15, \"Disponibilidad \");\n    i0.ɵɵelement(16, \"p-sortIcon\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"th\", 28);\n    i0.ɵɵtext(18, \"Estado \");\n    i0.ɵɵelement(19, \"p-sortIcon\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"th\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProductsComponent_ng_template_12_tr_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵelement(2, \"p-tableCheckbox\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelement(6, \"img\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵelementStart(17, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_ng_template_12_tr_0_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const product_r9 = i0.ɵɵnextContext().$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.editProduct(product_r9);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_ng_template_12_tr_0_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const product_r9 = i0.ɵɵnextContext().$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.deleteProduct(product_r9);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const product_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", product_r9);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r9.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", product_r9.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 7, product_r9.price));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r9.category);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r9.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r9.inventoryStatus);\n  }\n}\n\nfunction ProductsComponent_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ProductsComponent_ng_template_12_tr_0_Template, 19, 9, \"tr\", 30);\n  }\n\n  if (rf & 2) {\n    const product_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngIf\", product_r9.clave != 0);\n  }\n}\n\nfunction ProductsComponent_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" En total hay \", ctx_r4.products ? ctx_r4.products.length - 1 : 0, \" productos. \");\n  }\n}\n\nfunction ProductsComponent_ng_template_15_p_fileUpload_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"p-fileUpload\", 44);\n    i0.ɵɵlistener(\"uploadHandler\", function ProductsComponent_ng_template_15_p_fileUpload_8_Template_p_fileUpload_uploadHandler_0_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return ctx_r19.cambioArchivo($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"auto\", true)(\"customUpload\", true);\n  }\n}\n\nfunction ProductsComponent_ng_template_15_p_fileUpload_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"p-fileUpload\", 45);\n    i0.ɵɵlistener(\"uploadHandler\", function ProductsComponent_ng_template_15_p_fileUpload_9_Template_p_fileUpload_uploadHandler_0_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return ctx_r21.cambioArchivo($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"auto\", true)(\"customUpload\", true);\n  }\n}\n\nfunction ProductsComponent_ng_template_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 36);\n    i0.ɵɵelementStart(1, \"label\", 37);\n    i0.ɵɵtext(2, \"Nombre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductsComponent_ng_template_15_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.product.name = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 36);\n    i0.ɵɵelementStart(5, \"label\", 37);\n    i0.ɵɵtext(6, \"Foto\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\");\n    i0.ɵɵtemplate(8, ProductsComponent_ng_template_15_p_fileUpload_8_Template, 1, 2, \"p-fileUpload\", 39);\n    i0.ɵɵtemplate(9, ProductsComponent_ng_template_15_p_fileUpload_9_Template, 1, 2, \"p-fileUpload\", 40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 36);\n    i0.ɵɵelementStart(11, \"label\", 37);\n    i0.ɵɵtext(12, \"Categoria\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p-dropdown\", 41);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductsComponent_ng_template_15_Template_p_dropdown_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.categoria = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 36);\n    i0.ɵɵelementStart(15, \"label\", 37);\n    i0.ɵɵtext(16, \"Tallas\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p-multiSelect\", 42);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductsComponent_ng_template_15_Template_p_multiSelect_ngModelChange_17_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.talla = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 36);\n    i0.ɵɵelementStart(19, \"label\", 37);\n    i0.ɵɵtext(20, \"Descripci\\u00F3n corta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductsComponent_ng_template_15_Template_input_ngModelChange_21_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return ctx_r27.product.description = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 36);\n    i0.ɵɵelementStart(23, \"label\", 37);\n    i0.ɵɵtext(24, \"Descripci\\u00F3n larga \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"textarea\", 43);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductsComponent_ng_template_15_Template_textarea_ngModelChange_25_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.product.longDescription = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"div\", 36);\n    i0.ɵɵelementStart(27, \"label\", 37);\n    i0.ɵɵtext(28, \"Precio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductsComponent_ng_template_15_Template_input_ngModelChange_29_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return ctx_r29.product.price = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"div\", 36);\n    i0.ɵɵelementStart(31, \"label\", 37);\n    i0.ɵɵtext(32, \"Cantidad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductsComponent_ng_template_15_Template_input_ngModelChange_33_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return ctx_r30.product.quantity = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.product.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.product.id == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.product.id != 0);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"options\", ctx_r5.categorias)(\"ngModel\", ctx_r5.categoria)(\"placeholder\", ctx_r5.categoria)(\"filter\", true);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"options\", ctx_r5.tallas)(\"ngModel\", ctx_r5.talla);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.product.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.product.longDescription);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.product.price);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.product.quantity);\n  }\n}\n\nfunction ProductsComponent_ng_template_16_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 49);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_ng_template_16_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext(2);\n      return ctx_r33.saveProduct();\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function () {\n  return {\n    width: \"50px\",\n    height: \"50px\"\n  };\n};\n\nfunction ProductsComponent_ng_template_16_p_progressSpinner_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p-progressSpinner\", 50);\n  }\n\n  if (rf & 2) {\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(2, _c0));\n  }\n}\n\nfunction ProductsComponent_ng_template_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_ng_template_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return ctx_r35.hideDialog();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(1, ProductsComponent_ng_template_16_button_1_Template, 1, 0, \"button\", 47);\n    i0.ɵɵtemplate(2, ProductsComponent_ng_template_16_p_progressSpinner_2_Template, 1, 3, \"p-progressSpinner\", 48);\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r6.finalizado);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.finalizado);\n  }\n}\n\nconst _c1 = function () {\n  return [5, 10, 20];\n};\n\nconst _c2 = function () {\n  return {\n    width: \"450px\"\n  };\n};\n\nexport let ProductsComponent = /*#__PURE__*/(() => {\n  class ProductsComponent {\n    constructor(messageService, firestoreService, firebaseStorage, confirmationService) {\n      this.messageService = messageService;\n      this.firestoreService = firestoreService;\n      this.firebaseStorage = firebaseStorage;\n      this.confirmationService = confirmationService;\n      this.products = [];\n      this.categorias = [];\n      this.tallas = [];\n      this.sortOptions = [];\n      this.sortOrder = 0;\n      this.sortField = \"\";\n      this.mensajeArchivo = 'No hay un archivo seleccionado';\n      this.datosFormulario = new FormData();\n      this.nombreArchivo = '';\n      this.URLPublica = '';\n      this.porcentaje = 0;\n      this.finalizado = false;\n      this.selectedProducts = [];\n      this.product = {\n        id: 0,\n        category: '',\n        code: 0,\n        description: '',\n        image: '',\n        inventoryStatus: 'DISPONIBLE',\n        longDescription: '',\n        name: '',\n        price: 0,\n        quantity: 0,\n        rating: 5,\n        tallas: ''\n      };\n      this.submitted = false;\n      this.productDialog = false;\n      this.archivoForm = new FormGroup({\n        archivo: new FormControl(null, Validators.required)\n      });\n      this.traerProductos();\n    }\n\n    traerProductos() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.firestoreService.getTodosProductos().valueChanges().subscribe(res => {\n          let contenidoProducts = res;\n          contenidoProducts.forEach(entry => {\n            _this.products.push(entry);\n          });\n          console.log(_this.products);\n        });\n      })();\n    }\n\n    onUpload(event) {\n      for (let file of event.files) {\n        this.image.push(file);\n      }\n    } //Evento que se gatilla cuando el input de tipo archivo cambia\n\n\n    cambioArchivo(event) {\n      if (event.files.length > 0) {\n        for (let i = 0; i < event.files.length; i++) {\n          this.mensajeArchivo = `Archivo preparado: ${event.files[i].name}`;\n          this.nombreArchivo = event.files[i].name;\n          this.datosFormulario.delete('archivo');\n          this.datosFormulario.append('archivo', event.files[i], event.files[i].name);\n        }\n      } else {\n        this.mensajeArchivo = 'No hay un archivo seleccionado';\n      }\n    } //Sube el archivo a Cloud Storage\n\n\n    subirArchivo() {\n      let archivo = this.datosFormulario.get('archivo');\n      let tarea = this.firebaseStorage.tareaCloudStorage(this.nombreArchivo, archivo).then(res => {\n        this.firebaseStorage.referenciaCloudStorage(this.nombreArchivo).getDownloadURL().subscribe(resultado => {\n          this.URLPublica = resultado;\n        });\n        let referencia = this.firebaseStorage.referenciaCloudStorage(this.nombreArchivo);\n        referencia.getDownloadURL().subscribe(URL => {\n          this.URLPublica = URL;\n          this.product.image = URL;\n        });\n      });\n    }\n\n    ngOnInit() {\n      this.categorias = [{\n        name: 'Camisetas',\n        code: 'camisetas'\n      }, {\n        name: 'Mayoristas',\n        code: 'mayoristas'\n      }];\n      this.tallas = [{\n        name: 'UNICA',\n        code: 'UNICA'\n      }, {\n        name: 'S',\n        code: 'S'\n      }, {\n        name: 'M',\n        code: 'M'\n      }, {\n        name: 'L',\n        code: 'L'\n      }, {\n        name: 'XL',\n        code: 'XL'\n      }];\n    }\n\n    openNew() {\n      this.product = {\n        id: 0,\n        category: '',\n        code: this.products.length + 1,\n        description: '',\n        image: '',\n        inventoryStatus: 'DISPONIBLE',\n        longDescription: '',\n        name: '',\n        price: 0,\n        quantity: 0,\n        rating: 5,\n        tallas: ''\n      };\n      this.submitted = false;\n      this.productDialog = true;\n    }\n\n    hideDialog() {\n      this.productDialog = false;\n      this.submitted = false;\n      this.product = {\n        id: 0,\n        category: '',\n        code: 0,\n        description: '',\n        image: '',\n        inventoryStatus: 'DISPONIBLE',\n        longDescription: '',\n        name: '',\n        price: 0,\n        quantity: 0,\n        rating: 5,\n        tallas: ''\n      };\n    }\n\n    saveProduct() {\n      this.finalizado = true;\n      let archivo = this.datosFormulario.get('archivo');\n\n      if (this.product.id == 0) {\n        let tarea = this.firebaseStorage.tareaCloudStorage(this.nombreArchivo, archivo).then(res => {\n          this.firebaseStorage.referenciaCloudStorage(this.nombreArchivo).getDownloadURL().subscribe(resultado => {\n            this.URLPublica = resultado;\n          });\n          this.firebaseStorage.referenciaCloudStorage(this.nombreArchivo).getDownloadURL().subscribe(URL => {\n            this.product.image = URL;\n            this.product.tallas = this.talla;\n            this.product.category = this.categoria.code;\n            this.product.id = this.products.length != 0 ? this.products[this.products.length - 1].id + 1 : 1;\n            this.firestoreService.addProducto(this.product).then(() => {\n              this.finalizado = false;\n              this.messageService.add({\n                severity: 'success',\n                summary: 'Genial',\n                detail: 'Producto Creado',\n                life: 5000\n              });\n              this.productDialog = false;\n              this.product = {\n                id: 0,\n                category: '',\n                code: 0,\n                description: '',\n                image: '',\n                inventoryStatus: 'DISPONIBLE',\n                longDescription: '',\n                name: '',\n                price: 0,\n                quantity: 0,\n                rating: 5,\n                tallas: ''\n              };\n            }).catch(() => {\n              this.finalizado = false;\n              this.messageService.add({\n                severity: 'Warn',\n                summary: 'Alerta',\n                detail: 'Error al crear producto'\n              });\n            });\n          });\n        }).catch(() => {\n          this.finalizado = false;\n          this.messageService.add({\n            severity: 'Warn',\n            summary: 'Alerta',\n            detail: 'Error al crear producto'\n          });\n        });\n      } else {\n        console.log(this.product);\n        this.finalizado = false;\n      }\n    }\n\n    editProduct(product) {\n      console.log(product);\n      this.product = Object.assign({}, product);\n      this.productDialog = true;\n    }\n\n    deleteProduct(product) {\n      console.log(product);\n      this.confirmationService.confirm({\n        message: 'Estas seguro que quieres eliminar ' + product.name + '?',\n        header: 'Confirmar',\n        icon: 'pi pi-exclamation-triangle',\n        accept: () => {\n          this.firestoreService.deleteProduct(product.id).then(res => {\n            this.messageService.add({\n              severity: 'success',\n              summary: 'Successful',\n              detail: 'Producto Eliminado',\n              life: 5000\n            });\n          }).catch(res => {\n            this.messageService.add({\n              severity: 'Warn',\n              summary: 'Alerta',\n              detail: 'No se pudo eliminar elrpoducto'\n            });\n          });\n        }\n      });\n    }\n\n    onSortChange(event) {\n      let value = event.value;\n\n      if (value.indexOf('!') === 0) {\n        this.sortOrder = -1;\n        this.sortField = value.substring(1, value.length);\n      } else {\n        this.sortOrder = 1;\n        this.sortField = value;\n      }\n    }\n\n    findIndexById(id) {\n      let index = -1;\n\n      for (let i = 0; i < this.products.length; i++) {\n        if (this.products[i].id === id) {\n          index = i;\n          break;\n        }\n      }\n\n      return index;\n    }\n\n    createId() {\n      let id = '';\n      var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n      for (var i = 0; i < 5; i++) {\n        id += chars.charAt(Math.floor(Math.random() * chars.length));\n      }\n\n      return id;\n    }\n\n    generateId() {\n      let text = \"\";\n      let possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n      for (var i = 0; i < 5; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n      }\n\n      return text;\n    }\n\n  }\n\n  ProductsComponent.ɵfac = function ProductsComponent_Factory(t) {\n    return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.MessageService), i0.ɵɵdirectiveInject(i2.FirestoreService), i0.ɵɵdirectiveInject(i3.FirebaseStorageService), i0.ɵɵdirectiveInject(i1.ConfirmationService));\n  };\n\n  ProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductsComponent,\n    selectors: [[\"app-products\"]],\n    features: [i0.ɵɵProvidersFeature([MessageService, ConfirmationService])],\n    decls: 19,\n    vars: 14,\n    consts: [[1, \"ml-8\", \"pt-8\"], [1, \"text-5xl\"], [1, \"flex\", \"justify-content-center\", \"flex-wrap\", \"card-container\"], [1, \"card\", \"w-11\", \"justify-content-center\", \"m-auto\", \"mt-4\", \"mb-8\"], [\"styleClass\", \"mb-4\"], [\"pTemplate\", \"left\"], [\"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} productos\", 3, \"value\", \"rows\", \"paginator\", \"showCurrentPageReport\", \"rowsPerPageOptions\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"summary\"], [\"header\", \"Administrar Productos\", \"styleClass\", \"p-fluid\", 3, \"visible\", \"modal\", \"visibleChange\"], [\"pTemplate\", \"content\"], [\"pTemplate\", \"footer\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Agregar\", \"icon\", \"pi pi-plus\", 1, \"p-button-success\", \"mr-2\", 3, \"click\"], [1, \"flex\", \"align-items-center\", \"justify-content-between\"], [1, \"m-0\"], [1, \"p-input-icon-left\"], [\"pInputText\", \"\", \"type\", \"text\", \"placeholder\", \"Search...\"], [2, \"width\", \"3rem\"], [\"pSortableColumn\", \"name\"], [\"field\", \"name\"], [\"pSortableColumn\", \"price\"], [\"field\", \"price\"], [\"pSortableColumn\", \"category\"], [\"field\", \"category\"], [\"pSortableColumn\", \"rating\"], [\"field\", \"rating\"], [\"pSortableColumn\", \"inventoryStatus\"], [\"field\", \"inventoryStatus\"], [4, \"ngIf\"], [3, \"value\"], [\"alt\", \"\", 2, \"width\", \"100px\", 3, \"src\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-pencil\", 1, \"p-button-rounded\", \"p-button-success\", \"mr-2\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-trash\", 1, \"p-button-rounded\", \"p-button-warning\", 3, \"click\"], [1, \"p-d-flex\", \"p-ai-center\", \"p-jc-between\"], [1, \"p-field\"], [\"for\", \"name\"], [\"type\", \"text\", \"pInputText\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"chooseLabel\", \"Agrgar foto\", 3, \"auto\", \"customUpload\", \"uploadHandler\", 4, \"ngIf\"], [\"chooseLabel\", \"Cambiar foto\", 3, \"auto\", \"customUpload\", \"uploadHandler\", 4, \"ngIf\"], [\"filterBy\", \"name\", \"optionLabel\", \"name\", 3, \"options\", \"ngModel\", \"placeholder\", \"filter\", \"ngModelChange\"], [\"defaultLabel\", \"Selecionar tallas\", \"optionLabel\", \"name\", \"display\", \"chip\", 3, \"options\", \"ngModel\", \"ngModelChange\"], [\"rows\", \"5\", \"cols\", \"30\", \"pInputTextarea\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"chooseLabel\", \"Agrgar foto\", 3, \"auto\", \"customUpload\", \"uploadHandler\"], [\"chooseLabel\", \"Cambiar foto\", 3, \"auto\", \"customUpload\", \"uploadHandler\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Cancelar\", \"icon\", \"pi pi-times\", 1, \"p-button-text\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Guardar\", \"icon\", \"pi pi-check\", \"class\", \"p-button-text\", 3, \"click\", 4, \"ngIf\"], [\"styleClass\", \"custom-spinner\", \"strokeWidth\", \"8\", \"fill\", \"var(--surface-ground)\", \"animationDuration\", \".5s\", 3, \"style\", 4, \"ngIf\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Guardar\", \"icon\", \"pi pi-check\", 1, \"p-button-text\", 3, \"click\"], [\"styleClass\", \"custom-spinner\", \"strokeWidth\", \"8\", \"fill\", \"var(--surface-ground)\", \"animationDuration\", \".5s\"]],\n    template: function ProductsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"p\", 1);\n        i0.ɵɵtext(2, \"Productos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"p\");\n        i0.ɵɵtext(4, \"Administre los productos de su comercio\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 2);\n        i0.ɵɵelementStart(6, \"div\", 3);\n        i0.ɵɵelementStart(7, \"p-toolbar\", 4);\n        i0.ɵɵtemplate(8, ProductsComponent_ng_template_8_Template, 1, 0, \"ng-template\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"p-table\", 6);\n        i0.ɵɵtemplate(10, ProductsComponent_ng_template_10_Template, 5, 0, \"ng-template\", 7);\n        i0.ɵɵtemplate(11, ProductsComponent_ng_template_11_Template, 21, 0, \"ng-template\", 8);\n        i0.ɵɵtemplate(12, ProductsComponent_ng_template_12_Template, 1, 1, \"ng-template\", 9);\n        i0.ɵɵtemplate(13, ProductsComponent_ng_template_13_Template, 2, 1, \"ng-template\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"p-dialog\", 11);\n        i0.ɵɵlistener(\"visibleChange\", function ProductsComponent_Template_p_dialog_visibleChange_14_listener($event) {\n          return ctx.productDialog = $event;\n        });\n        i0.ɵɵtemplate(15, ProductsComponent_ng_template_15_Template, 34, 13, \"ng-template\", 12);\n        i0.ɵɵtemplate(16, ProductsComponent_ng_template_16_Template, 3, 2, \"ng-template\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"p-toast\");\n        i0.ɵɵelement(18, \"p-confirmDialog\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"value\", ctx.products)(\"rows\", 5)(\"paginator\", true)(\"showCurrentPageReport\", true)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(11, _c1));\n        i0.ɵɵadvance(5);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(12, _c2));\n        i0.ɵɵproperty(\"visible\", ctx.productDialog)(\"modal\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(13, _c2));\n      }\n    },\n    directives: [i4.Toolbar, i1.PrimeTemplate, i5.Table, i6.Dialog, i7.Toast, i8.ConfirmDialog, i9.ButtonDirective, i10.Ripple, i11.InputText, i5.TableHeaderCheckbox, i5.SortableColumn, i5.SortIcon, i12.NgIf, i5.TableCheckbox, i13.DefaultValueAccessor, i13.NgControlStatus, i13.NgModel, i14.Dropdown, i15.MultiSelect, i16.InputTextarea, i17.FileUpload, i18.ProgressSpinner],\n    pipes: [i12.CurrencyPipe],\n    styles: [\".contenedor[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}.contenedor[_ngcontent-%COMP%]   .contenedor-formulario[_ngcontent-%COMP%]{width:400px}.contenedor[_ngcontent-%COMP%]   .download[_ngcontent-%COMP%]{background:#1081ff;color:#fff;padding:10px 20px;margin-bottom:20px}.contenedor[_ngcontent-%COMP%]   .download[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline;color:#fff}.p-element[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]   .p-component[_ngcontent-%COMP%]   .p-button-icon-only[_ngcontent-%COMP%]{display:none}\", \"[_nghost-%COMP%]     .p-dialog .product-image{width:150px;margin:0 auto 2rem;display:block}\"]\n  });\n  return ProductsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}